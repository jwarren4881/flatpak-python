# kivy 2.1.0
#: import Factory kivy.factory.Factory

#: include kv_files/PostGoodShopOperations.kv
#: include kv_files/PauseShopOrder.kv

#:set button_font 20
#:set warning [1, 239/255, 0, 1]
#:set danger [1, 0, 0, 1]
#:set success [0, 1, 0, 1]
#:set normal [1, 1, 1, 1]
#:set blue [0, 0, 1, 1]
#:set teal [0, 202/255, 177/255, 1]
#:set black [0, 0, 0, 1]
#:set shamrock [46/255, 204/255, 113/255, 1]
#:set main_background [60/255,60/255,60/255,1]

#<PostScrapPopup@Popup>:
#    id: post_scrap_popup
#    title: "Scrap Quantity"
#    auto_dismiss: False
#    size_hint: (None, None)
#    size: (400,400)
#    BoxLayout:
#        id: main_post_scrap
#        orientation: 'vertical'
#        BoxLayout:
#            id: post_scrap_top_buttons
#            orientation: 'horizontal'
#            size_hint_y: None
#            height: root.height / 10
#            pos: (0, root.height)
#            Button:
#                text: 'Clear'
#                on_release:
#                    number_pad_scrap.text_box.text = ''
#            Button:
#                text: 'Close'
#                on_release:
#                    root.dismiss()
#		NumberPadPopup:
			#id: number_pad_scrap

<ActiveShopOrder>:
    id: active_shop_order
	name: 'active_shop_order'
    background_color: normal
    canvas.before:
        Color:
            rgba: [60/255,60/255,60/255,1]
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
    	id:main_shop_order_box_layout
    	orientation:'vertical'
		TopBar:
			id: active_shop_order_top_bar
			size_hint_y: .1
			#pos: (0, root.height - self.height)
		BoxLayout:
			id: bottom_third_main
			canvas:
				Color:
					rgba:danger
				Line:
					rectangle:(self.x, self.y, self.width, self.height)
			orientation: 'horizontal'
			size_hint_y: None
			height: (root.height - (lower_main_button_bar.height + inner_main_window.height)) / 3
			pos: (0, top_product_description_shop_order.y + top_product_description_shop_order.height)
			Label:
				size_hint_x: None
				width: bottom_third_main.width * .125
				text: '131670'
			ToggleButton:
				size_hint_x: None
				width: bottom_third_main.width * .125
				text: 'Active XXX'
				text_color_normal: black
		BoxLayout:
			id: inner_main_window
			orientation: 'vertical'
			size_hint_y: None
			height: root.height * .7
			pos: (0, lower_main_button_bar.height)
			canvas.before:
				Color:
					rgba: normal
				Line:
					width: 1
					rectangle: (self.x, self.y, self.width, self.height)

			BoxLayout:
				id: top_product_description_shop_order
				orientation: 'horizontal'
				size_hint_y: None
				height: inner_main_window.height * .09375
				Label:
					id: part_description
					text: 'Part Description goes here'
				Label:
					id: cell_description
					text: 'Cell C1'
				Label:
					id: order_sequence
					text: 'Seq 110068'
				Label:
					text: 'Haul out requested'

			BoxLayout:
				id: shop_order_posting_data
				orientation: 'vertical'
				size_hint_y: None
				height: inner_main_window.height * .70625
				BoxLayout:
					id: operation_data
					orientation: 'vertical'
					size_hint_y: None
					height: shop_order_posting_data.height * .15
					Label:
						id: operation_description
						text: "Operation description goes here"
						font_size: "20dp"
					Label:
						id: operation_parts_per_hour
						text: "Operation parts per hour goes here"
						color: teal
						font_size: "20dp"
				BoxLayout:
					id: posted_parts_data
					orientation: 'vertical'
					size_hint_y: None
					height: shop_order_posting_data.height * .75
					GridLayout:
						id: shop_order_posted_quantity_data
						cols: 2
						Label:
							text:"Required"
							font_size: "50dp"
							color: teal
						Label:
							text: "Remaining"
							font_size: "50dp"
							background_normal: ''
							color: teal
						Label:
							id: operation_parts_required
							text: "50"
							font_size: "100dp"
							color: teal
						Label:
							id: operation_parts_remaining
							text: "50"
							font_size: "100dp"
							color: teal
				BoxLayout:
					id: posted_this_shift_data
					orientation: 'vertical'
					size_hint_y: None
					height: shop_order_posting_data.height * .1
					Label:
						text: "You have posted 0 parts this shift"

			BoxLayout:
				id: lower_inner_main_button_bar
				orientation: 'horizontal'
				size_hint_y: None
				height: inner_main_window.height * .2
				padding: 7
				spacing: "5dp"
				Button:
					id:post_good_button
					text: 'Post Good'
					font_size: button_font
					color: black
					background_normal: ''
					background_color: normal
				Button:
					id: post_scrap_button
					text: 'Post Scrap'
					font_size: button_font
					color: black
					background_normal: ''
					background_color: normal
					#on_release:
						#Factory.NumberPadPopup(cb=None).open()
						#Factory.PostScrapPopup().open()
				Button:
					text: 'Request\nMaterial'
					font_size: button_font
					color: black
					background_normal: ''
					background_color: normal
					padding_x: 10
				Button:
					text: 'Print Ticket'
					font_size: button_font
					color: black
					background_normal: ''
					background_color: normal
				Button:
					text: 'Complete'
					font_size: button_font
					color: black
					background_normal: ''
					background_color: success
		BoxLayout:
			id: lower_main_button_bar
			orientation: 'horizontal'
			size_hint_y: None
			height: root.height * 0.125
			spacing: "5dp"
			padding: 7
			Button:
				text: 'Switch Shop Order'
				font_size: button_font
				color: black
				background_normal: ''
				background_color: normal
				on_release:
					app.root.transition.direction = 'up'
					app.root.current = 'available_shop_orders'
			Button:
				text: 'Pause'
				font_size: button_font
				color: black
				background_normal: ''
				background_color: warning
				on_release:
					Factory.PauseShopOrder().open()
			Button:
				text: 'Report a Problem'
				font_size: button_font
				color: black
				background_normal: ''
				background_color: danger
			Button:
				text: 'Time Sheet'
				font_size: button_font
				color: black
				background_normal: ''
				background_color: normal
				on_release:
					app.root.current = 'Timesheet'